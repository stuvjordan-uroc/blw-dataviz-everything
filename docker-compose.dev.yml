# Docker Compose for Local Development
#
# This runs the unified API locally while connecting to the Railway-hosted database.
# The UI runs separately via Vite dev server and proxies API requests to this container.
#
# Usage:
#   1. Copy .env.local.example to .env.local and fill in Railway credentials
#   2. Run: docker compose -f docker-compose.dev.yml up
#   3. API will be available at http://localhost:3003

version: "3.8"

services:
  api:
    build:
      context: .
      dockerfile: packages/api-polls-unified/Dockerfile
    ports:
      - "3003:3003"
    env_file:
      - .env.local
    environment:
      # Override port to match what the API listens on
      - PORT=3003
      - NODE_ENV=development
    volumes:
      # Mount .env.local for hot-reload during development (optional)
      - ./.env.local:/app/.env.local:ro
    restart: unless-stopped
    networks:
      - blw-dev

networks:
  blw-dev:
    driver: bridge
