# Docker Compose for Local Development
#
# This runs the unified API locally while connecting to the Railway-hosted database.
# The UI runs separately via Vite dev server and proxies API requests to this container.
#
# Usage:
#   1. Ensure .env file has Railway credentials (copy from .env.example if needed)
#   2. Run: docker compose -f docker-compose.dev.yml up
#   3. API will be available at http://localhost:3003

version: "3.8"

services:
  api:
    build:
      context: .
      dockerfile: packages/api-polls-unified/Dockerfile
    ports:
      - "3003:3003"
    env_file:
      - .env
    environment:
      # Override for local development
      - NODE_ENV=development
    restart: unless-stopped
    networks:
      - blw-dev

networks:
  blw-dev:
    driver: bridge
